<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hitung Mundur Ulang Tahun</title>
  <style>
    body{
      font-family: sans-serif;
      color: #fff;
      background: linear-gradient( 45deg,  rgba(109,25,252,1) 16.4%, rgba(125,31,165,1) 56.1% );
      background-repeat: no-repeat;
      background-attachment: fixed;
    }

    .bio{
      border: solid 1px #fff;
      height: 200px;
      width: 280px;
      padding: 10px;
      float: left;
      margin: 10px;
    }

    .bio1{
      margin: 10px;
      border: solid 1px #fff;
      float: left;
    }
    .pad1{
      padding: 2px;
    }
    .pad2{
      padding: 10px;
    }

    a{
      text-decoration: none;
      color: #ffffff;
    }

    #time, #timeCustom{
      text-align: center;
      font-size: 40px;
      /*float: left;*/
      margin: 10px;
      max-width: 250px;
    }

    #keterangan{
      text-align: center;
      color: #ff0000;
      /*float: left;*/
    }

    input, button {
      color: #fff;
      font-size: 12px;
      border:1px solid #fff;
      background:rgba(0,0,0,0);
      padding:5px;
      margin: 2px;
      border-radius: 3px;
      float: left;
    }

    #nama:hover, a:hover, input:hover, button:hover, input:focus, button:focus {
      color: rgba(125,31,165,1);
      background: #fff;
    }

    table{
      margin: 10px;
      padding: 0px;
      /*float: left;*/
    }
  </style>
</head>
<body onload="mainFunction()" id="mainBody">
    <div class="bio1 pad2">
      <p id="time"></p>
      <p id="timeCustom">Silahkan masukan waktu yang akan dihitung.</p>
    </div>
    <div class="bio1 pad1">
      <table>
        <tr>
          <td>Dari</td>
          <td>:</td>
          <td>
            <input type="date" id="inputDateF" value="" readonly="">
            <input type="date" id="inputDateF1" value="">
          </td>
          <td>
            <input type="time" id="inputTimeF" value="" readonly="">
            <input type="time" id="inputTimeF1" value="">
          </td>
        </tr>
        <tr>
          <td>Ke</td>
          <td>:</td>
          <td>
            <input type="date" id="inputDate" value="">
            <input type="date" id="inputDate1" value="">
          </td>
          <td>
            <input type="time" id="inputTime" value="">
            <input type="time" id="inputTime1" value="">
          </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td colspan="2">
            <button type="button" id="reset">Kembali</button>
            <button type="button" id="hariIni">Hari ini</button>
            <button type="button" id="berhenti">Berhenti</button>
            <button type="button" id="lanjut">Lanjutkan</button>
            <button type="button" id="hitung">Hitung</button>
          </td>
        </tr>
        <tr>
            <td colspan="4">
              <p id="keterangan"></p>
            </td>
        </tr>
      </table>
    </div>

    <div class="bio">
      <h3 id="nama" style="text-align: center">Isep Lutpi Nur</h3>
      <h4>Whatsapp: <a href="https://api.whatsapp.com/send?phone=+6285798132505" target="_blank">085798132505</a></h4>
      <h4>Telegram: <a href="https://t.me/+6285798132505" target="blank">085798132505</a></h4>
      <h4>Facebook: <a href="https://facebook.com/iseplutpinur7" target="blank">Isef Lutfi Nur</a></h4>
      <h4>Github: <a href="https://github.com/iseplutpinur" target="blank">Isep Lutpi Nur</a></h4>
    </div>
</body>
</html>
<script>
  var x;
  var timeDef = new Date();
  var listSwitchA = [
      'time', 'hariIni', 
      'berhenti', 'lanjut', 
      'inputDate', 'inputTime', 
      'inputDateF', 'inputTimeF'
      ,'hitung'
      ];
  var listSwitchB = [
      'inputDate1', 'inputTime1', 
      'inputDateF1', 'inputTimeF1',
      'timeCustom', 'keterangan'
    ];
  displayNone(listSwitchB);

  // default
  const date      = getById("inputDate");
  const time      = getById("inputTime");
  const dateF     = getById("inputDateF");
  const timeF     = getById("inputTimeF");
  const berhenti  = getById("berhenti");
  const lanjut    = getById("lanjut");
  const reset     = getById("reset");
  const hariIni   = getById("hariIni");
  berhenti.addEventListener(  "click",  function(){ stop();       });
  hariIni.addEventListener(   "click",  function(){ hariIniFun(); });
  lanjut.addEventListener(    "click",  function(){ lanjutkan();  });
  reset.addEventListener(     "click",  function(){ resetFun();   });
  time.addEventListener(      "change", function(){ costum();     });
  date.addEventListener(      "change", function(){ costum();     });

  // kostum
  const hitung  = getById("hitung");
  const date1   = getById("inputDate1");
  const time1   = getById("inputTime1");
  const dateF1  = getById("inputDateF1");
  const timeF1  = getById("inputTimeF1");
  hitung.addEventListener("click",  function(){ hitungFun();});
  date1.addEventListener("change", function(){ hitungAction()});
  time1.addEventListener("change", function(){ hitungAction()});
  dateF1.addEventListener("change", function(){ hitungAction()});
  timeF1.addEventListener("change", function(){ hitungAction()});

  // default time
  date.value = tambahTahun();
  time.value = "00:00";

  dateF.value = timeDef.getFullYear() + "-" + nol((timeDef.getMonth()+1)) + "-" + nol(timeDef.getDate());
  timeF.value = nol(timeDef.getHours()) + ":" + nol(timeDef.getMinutes());

  function mainFunction(status = false){
    const date = getById("inputDate");
    const time = getById("inputTime");
    var countDownDate = new Date(dateInput(date, time)).getTime();
    x = setInterval(function() {
      var today = new Date();
      idVal("inputDateF", today.getFullYear() + "-" + nol((today.getMonth()+1)) + "-" + nol(today.getDate()));
      idVal("inputTimeF", nol(today.getHours()) + ":" + nol(today.getMinutes()));
      var now = today.getTime();
      var distance = countDownDate - now;
      var tahun = hideZero(nol(Math.floor( distance / (1000 * 60 * 60 * 24 * 30 * 12))), "Tahun");
      var bulan = hideZero(nol(Math.floor((distance % (1000 * 60 * 60 * 24 * 30 * 12)) / (1000 * 60 * 60 * 24 * 30))), "Bulan");
      var hari  = hideZero(nol(Math.floor((distance % (1000 * 60 * 60 * 24 * 30)) / (1000 * 60 * 60 * 24))), "Hari");
      var jam   = hideZero(nol(Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))), "Jam");
      var menit = hideZero(nol(Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60))), "Menit");
      var detik = hideZero(nol(Math.floor((distance % (1000 * 60)) / 1000)), "Detik");
      idHtml("time", tahun + bulan + hari + jam + menit + detik);
    if (distance < 0) {
        clearInterval(x);
        if (status) idHtml("time", "EXPIRED");
        else idHtml("time", "Selamat Ulang Tahun, Semoga di umur barunya bisa lebih dewasa dan bijaksana dalam menyikapi segala hal dan situasi, Semoga lebih semangat belajarnya, Lulus tepat waktu dan bisa jadi kebanggaan orang tua");
      }
    }, 1000);
    if (status) document.title = "Kostum Hitung Mundur";
    else document.title = "Hitung Mundur Ulang Tahun";
  }

  function hitungAction(){
    if (date1.value == "" || time1.value == "" || dateF1.value == "" || timeF1.value == ""){
      idHtml("keterangan", "Masih ada kolom yang belum terisi");
      getById("keterangan").removeAttribute("style", 0);
    } else{
      getById('keterangan').style.display = "none";
      hitungActionStrart();
    }
  }

  function hitungActionStrart(){
    var nilai1 = new Date(dateInput(dateF1, timeF1)).getTime();
    var nilai2 = new Date(dateInput(date1, time1)).getTime();
    var selisih = Math.abs(nilai2 - nilai1);
    var tahun = hideZero(nol(Math.floor( selisih / (1000 * 60 * 60 * 24 * 30 * 12))), "Tahun");
    var bulan = hideZero(nol(Math.floor((selisih % (1000 * 60 * 60 * 24 * 30 * 12)) / (1000 * 60 * 60 * 24 * 30))), "Bulan");
    var hari  = hideZero(nol(Math.floor((selisih % (1000 * 60 * 60 * 24 * 30)) / (1000 * 60 * 60 * 24))), "Hari");
    var jam   = hideZero(nol(Math.floor((selisih % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))), "Jam");
    var menit = hideZero(nol(Math.floor((selisih % (1000 * 60 * 60)) / (1000 * 60))), "Menit");
    var detik = hideZero(nol(Math.floor((selisih % (1000 * 60)) / 1000)), "Detik");
    idHtml("timeCustom", kosong(tahun + bulan + hari + jam + menit + detik));
  }

  function kosong(x){
    if (x == "") return "Kedua waktu sama";
    else return x;
  }

  function stop(){
    clearInterval(x);
    //
  }

  function costum(){
    clearInterval(x);
    mainFunction(true);
  }

  function lanjutkan(){
    clearInterval(x);
    mainFunction(true);
  }

  function resetFun(){
    clearInterval(x);
    date.value = tambahTahun();
    time.value = "00:00";
    mainFunction();
    displayNone(listSwitchB);
    displayShow(listSwitchA);
    idHtml("reset", "Reset");
  }

  function hariIniFun(){
    var today = new Date();
    clearInterval(x);
    date.value = today.getFullYear() + "-" + nol((today.getMonth()+1)) + "-" + nol(today.getDate());
    time.value = nol(today.getHours()) + ":" + nol((Number(today.getMinutes()) + 1));
    mainFunction(true);
  }

  function dateInput(date, time){
    date = date.value.split('-');
    time = time.value.split(':');
    date = date[1] + " " + date[2] + " " + date[0];
    time = time[0] + ":" + time[1] + ":00";
    return date + " " + time;
  }

  function keFun(x){
    x = x.split(" ");
    return x[1] + "/" + x[0] + "/" + x[2] + "  " + x[3];
  }

  function hideZero(n, t){
    if (n == 0)return "";
    else return n + " " + t + " <br>";
  }

  function nol(angka = false){
    if (angka != false) {
      if (angka < 10) return "0" + angka;
      else return angka;
    } else return "00";
  }

  function idVal(id = false, val = false){
    if (id != false &&  val != false) {
      getById(id).value = val;
    } else return id;
  }

  function idHtml(id = false, val = false){
    if (id != false &&  val != false) {
      getById(id).innerHTML = val;
    } else return id;
  }

  function getById(id){
    if (id != false) {
      return document.getElementById(id);
    } else return id;
  }

  function tambahTahun(){
    var dateX = timeDef.getTime();
    var dateY = new Date("08 10 " + timeDef.getFullYear() + " 00:00").getTime();
    if ((dateY - dateX) > 0) return timeDef.getFullYear() + "-08-10";
    else return (Number(timeDef.getFullYear()) + 1) + "-08-10";
  }

  function hitungFun(){
    stop();
    displayNone(listSwitchA);
    displayShow(listSwitchB);
    idHtml("reset", "Kembali");
    getById('keterangan').style.display = "none";
  }

  function displayNone(x){
    for (var i = x.length - 1; i >= 0; i--) {
      getById(x[i]).style.display = "none";
    }
  }

  function displayShow(x){
    for (var i = x.length - 1; i >= 0; i--) {
      getById(x[i]).removeAttribute("style", 0);
    }
  }

  function bgcolorFun(x){
    getById("mainBody").style.background = x;
    getById("mainBody").style.backgroundAttachment = "fixed";
    getById("mainBody").style.backgroundRepeat = "no-repeat";
  }

  getById("nama").addEventListener("click", function(){
    window.open("https://api.whatsapp.com/send?phone=+6285798132505");
    window.open("https://t.me/+6285798132505");
    window.open("https://facebook.com/iseplutpinur7");
    window.open("https://github.com/iseplutpinur");
  });

  var bgcolorno = 0;
  var bgcolor = setInterval(function(){
    if (bgcolorno < 8) bgcolorno++;
    else bgcolorno = 1;
    if(bgcolorno == 1) bgcolorFun("linear-gradient( 0deg,  rgba(109,25,252,1) 16.4%, rgba(125,31,165,1) 56.1% )");
    else if(bgcolorno == 2) bgcolorFun("linear-gradient( 45deg,  rgba(109,25,252,1) 16.4%, rgba(125,31,165,1) 56.1% )");
    else if(bgcolorno == 3) bgcolorFun("linear-gradient( 90deg,  rgba(109,25,252,1) 16.4%, rgba(125,31,165,1) 56.1% )");
    else if(bgcolorno == 4) bgcolorFun("linear-gradient( 135deg,  rgba(109,25,252,1) 16.4%, rgba(125,31,165,1) 56.1% )");
    else if(bgcolorno == 5) bgcolorFun("linear-gradient( 180deg,  rgba(109,25,252,1) 16.4%, rgba(125,31,165,1) 56.1% )");
    else if(bgcolorno == 6) bgcolorFun("linear-gradient( 225deg,  rgba(109,25,252,1) 16.4%, rgba(125,31,165,1) 56.1% )");
    else if(bgcolorno == 7) bgcolorFun("linear-gradient( 270deg,  rgba(109,25,252,1) 16.4%, rgba(125,31,165,1) 56.1% )");
    else if(bgcolorno == 8) bgcolorFun("linear-gradient( 315deg,  rgba(109,25,252,1) 16.4%, rgba(125,31,165,1) 56.1% )");
  },200);
</script>
